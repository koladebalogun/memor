{"ast":null,"code":"import _regeneratorRuntime from\"/Users/koladebalogun/Desktop/New-Projects/Memoirs project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/koladebalogun/Desktop/New-Projects/Memoirs project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/koladebalogun/Desktop/New-Projects/Memoirs project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState}from\"react\";import{Typography,TextField,Button}from'@material-ui/core';import{useDispatch}from'react-redux';import useStyles from'./styles';import{commentPost}from'../../actions/posts';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CommentSection=function CommentSection(_ref){var _user$result;var post=_ref.post;var classes=useStyles();var dispatch=useDispatch();var _useState=useState(post===null||post===void 0?void 0:post.comments),_useState2=_slicedToArray(_useState,2),comments=_useState2[0],setComments=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),comment=_useState4[0],setComment=_useState4[1];//this state will keep track of the value of a specific comment\nvar user=JSON.parse(localStorage.getItem('profile'));//grabbing our user from loacl storage to get the details of the person adding a comment\nvar commentsRef=useRef();var handleClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var finalComment,newComments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:finalComment=\"\".concat(user.result.name,\": \").concat(comment);_context.next=3;return dispatch(commentPost(finalComment,post._id));case 3:newComments=_context.sent;setComments(newComments);setComment('');commentsRef.current.scrollIntoView({behavior:'smooth'});case 7:case\"end\":return _context.stop();}}},_callee);}));return function handleClick(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:classes.commentsOuterContainer,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.commentsInnerContainer,children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h6\",children:\"Comments\"}),comments.map(function(comment,index){return/*#__PURE__*/_jsxs(Typography,{gutterBottom:true,variant:\"subtitle1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:comment.split(': ')[0]}),comment.split(':')[1]]},index);}),/*#__PURE__*/_jsx(\"div\",{ref:commentsRef})]}),(user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:_user$result.name)&&/*#__PURE__*/_jsxs(\"div\",{style:{width:'70%'},children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h6\",children:\"Leave a comment\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,rows:4,variant:\"outlined\",label:\"Comment\",multiline:true,value:comment,onChange:function onChange(e){return setComment(e.target.value);}}),/*#__PURE__*/_jsx(Button,{style:{marginTop:'10px'},fullWidth:true,disabled:!comment,variant:\"contained\",color:\"primary\",onClick:handleClick,children:\"Comment\"})]})]})});};export default CommentSection;//we'll pass the comment section inside the post details component.","map":{"version":3,"sources":["/Users/koladebalogun/Desktop/New-Projects/Memoirs project/client/src/components/PostDetails/CommentSection.jsx"],"names":["React","useRef","useState","Typography","TextField","Button","useDispatch","useStyles","commentPost","CommentSection","post","classes","dispatch","comments","setComments","comment","setComment","user","JSON","parse","localStorage","getItem","commentsRef","handleClick","finalComment","result","name","_id","newComments","current","scrollIntoView","behavior","commentsOuterContainer","commentsInnerContainer","map","index","split","width","e","target","value","marginTop"],"mappings":"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","sourcesContent":["import React, {useRef, useState} from \"react\";\nimport { Typography, TextField, Button } from '@material-ui/core';\nimport { useDispatch } from 'react-redux';\n\nimport useStyles from './styles';\nimport { commentPost } from '../../actions/posts'\n\nconst CommentSection = ({ post }) => {\n    const classes = useStyles();\n    const dispatch = useDispatch();\n    const [ comments, setComments ] = useState(post?.comments);\n    const [ comment, setComment ] = useState(''); //this state will keep track of the value of a specific comment\n    const user  = JSON.parse(localStorage.getItem('profile')); //grabbing our user from loacl storage to get the details of the person adding a comment\n    const commentsRef = useRef(); \n\n    const handleClick = async() => {\n        const finalComment = `${user.result.name}: ${comment}`;\n\n        const newComments = await dispatch(commentPost(finalComment, post._id));\n\n        setComments(newComments);\n        setComment('');\n\n        commentsRef.current.scrollIntoView({ behavior: 'smooth'});\n    }\n\n    return ( \n        <div>\n            <div className={classes.commentsOuterContainer }>\n                <div className={classes.commentsInnerContainer}>\n                    <Typography gutterBottom variant=\"h6\">Comments</Typography>\n                    {comments.map((comment, index) => (\n                        <Typography key={index} gutterBottom variant=\"subtitle1\">\n                            <strong>{comment.split(': ')[0]}</strong>\n                            {comment.split(':')[1]}\n                        </Typography>\n                    ))}\n                    <div ref={commentsRef}/>\n                </div>\n                {/* If there's a user, display this code which will allow the user to add and view comments*/}\n                {user?.result?.name && (\n                    <div style={{ width: '70%'}}>\n                    <Typography gutterBottom variant=\"h6\" >Leave a comment</Typography>\n                    <TextField \n                    fullWidth\n                    rows={4}\n                    variant=\"outlined\"\n                    label=\"Comment\"\n                    multiline\n                    value={comment}\n                    onChange={(e) => setComment(e.target.value) }\n                    />\n                    <Button style={{ marginTop: '10px'}} fullWidth disabled={!comment} variant=\"contained\" color=\"primary\" onClick={handleClick}>Comment</Button>\n                    </div> \n                )}\n            </div>\n        </div>\n     );\n}\n \nexport default CommentSection;\n\n//we'll pass the comment section inside the post details component."]},"metadata":{},"sourceType":"module"}